\documentclass[a4paper,10 pt]{article} 
\usepackage[french,italian]{babel} 
\usepackage[T1]{fontenc} 
\usepackage[utf8]{inputenc} 
\usepackage{enumitem}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}                              
\usepackage{graphicx}
\usepackage[normalem]{ulem}
\useunder{\uline}{\ul}{}
\usepackage[a4paper, top=1.27cm, bottom=2cm, left=1.27cm, right=1.27cm]{geometry}
\usepackage{booktabs}
\usepackage{array}
\usepackage {quoting}
\usepackage{subfig}

\title{\huge{Simulazione diffusione epidemia secondo modello SIR}} 
\author{Anastasi Edoardo \  Lanzi Samuele \ Merola Samuele}
\date{A.A. 2019-2020}

\begin{document}
\maketitle 


\begin{abstract}
 Il nostro programma si sviluppa in due modalità:
 \begin{itemize}
	\item[Modalità 1] Permette di ottenere l'andamento di persone suscettibili, infetti e non suscettibili in un'epidemia in funzione del tempo. Riceve in input i valori di $\beta$ e $\gamma$ (valori caratteristici di ogni epidemia) e presenta in output i valori di suscettibili, infetti e non suscettibili per ogni giorno (vengono simulati 60 giorni, partendo da una situazione di 100 infetti su una popolazione di 1000 unità); i valori in output vengono presentati sia in tabella che in un grafico.
 \item[Modalità 2] Permette di visualizzare in una griglia grafica lo stato di ciascuna unità durante il corso di una epidemia, allo stesso tempo viene stampato il grafico delle curve di suscettibili, infetti e guariti in funzione del tempo nell'epidemia simulata. In input si assegnano le celle da ritenere infette all'origine con click del mouse sulle celle. In output, la situazione dell'epidemia in aggiornamento per ogni giorno fino al termine del contagio.
  \end{itemize}
\end{abstract}



\section{Scelte progettuali e implementative} 
\subsection{Modalità 1}
Il modello SIR è un modello matematico che descrive l'evoluzione di una epidemia. L'andamento di S, I, R è descritto dalle seguenti formule:

\[
S_i = S_{i - 1} - \beta I_{i - 1}S_{i - 1} 
\]
\[
I_i = I_{i - 1} - \beta I_{i - 1}S_{i - 1} - \gamma I_{i - 1}
\]
\[
R_i = R_{i - 1} - \gamma I_{i - 1}
 \]
$\beta$ indica la probabilità di contagio ed è compresa tra 0 e 1 e $\gamma$ indica la probabilità di guarigione, anch'essa compresa tra 0 e 1.
\ \\
Il nostro programma utilizza queste formule per calcolare i valori di S, I e R per ogni giorno i (si veda  \textbf{\textit{sir.cpp}}).
\ \\
All'avvio del programma, all'utente sarà chiesto di fornire tramite standard input i valori di beta, gamma e infetti iniziali caratteristici della situazione da simulare. La durata della simulazione (60 giorni) e il numero totale della popolazione (1000 unità) sono definiti al compile time.
\\ 
Con questi valori il programma riesce a calcolare i valori di S, I e R di ciascun giorno (si veda  \textbf{\textit{sir.cpp}}) e di stamparli come standard output (si veda  \textbf{\textit{print.cpp}}), inoltre in \textbf{\textit{main.cpp}} viene creata una finestra con l'ausilio di SFML, vengono creati tre vettori che contengono le coordinate dei valori di S, I e R in funzione dei giorni trascorsi e vengono stampati in un piano cartesiano su questa finestra.


\subsection{Modalità 2}
....
\ \\
....
\ \\
...
\ \\
.....
\ \\
...
\ \\
....

\section{Istruzioni di compilazione e esecuzione}

Per la corretta compilazione del progetto è necessario l'utilizzo di CMake. %e librerie SFML??
Se non si possiede CMake, è necessario installarlo:
\begin {quoting}
 \verb! sudo apt-get install cmake !
\end{quoting}
\ \\
\ \\
Dopo aver installato CMake, si può passare alla compilazione:
\begin {quoting}
 \begin {verbatim}
cd SIRmodel
cd option1 (cd option2)
mkdir build
cd build
cmake -DCMAKE_BUILD_TYPE=Debug ..
cmake --build . --target all
make VERBOSE=1 
\end{verbatim}
\end{quoting}
Ora il progetto è compilato, si può procedere con i test tramite il comando
\begin {quoting}
 \verb! ctest !
\end{quoting}
oppure con l'esecuzione del programma tramite il comando
\begin {quoting}
 \verb! ./sir-sfml !
\end{quoting}
\section{Risultati output e interpretazione}
\subsection{Modalità 1}
Eseguendo la prima modalità del programma, verranno mostrati in output del terminale tramite uno  \verb! std::cout ! i valori di S, I e R per ogni giorno di simulazione [Figura 1 (a)]; inoltre, grazie alla libreria SFML, verrà aperto un grafico che rappresenta tali valori in funzione dei giorni trascorsi. Si vedranno quindi dei punti rossi che rappresentano il numero di persone suscettibili per giorno, dei punti blu che rappresentano i non suscettibili per giorno e dei punti verdi che rappresentano quanti sono infetti in quel giorno [Figura 1 (b)]. Si può notare che il risultato è coerente con il modello SIR atteso (si veda Scelte progettuali e implementative).


\begin{figure}
\centering
\subfloat[][\emph{output tramite finestra grafica SFML}]
{\includegraphics[width=.60\textwidth]{Figura_1.png}} \quad \subfloat[][\emph{standard output da terminale}]
{\includegraphics[width=.25\textwidth]{Figura_2.png}} \\
\caption{}
\label{fig:subfig}
\end{figure}


\subsection{Modalità 2}
Eseguendo la seconda modalità del programma, con il mouse si potrà fare click su ogni cella che si desidera considerare infetta alla situazione iniziale, poi premendo un qualunque tasto sulla tastiera si avvierà la simulazione del contagio. Si apriranno due finestre, nella prima [Figura 2 (a)] si vede una scacchiera composta da 256 celle per lato. Ciascuna cella sarà colorata di rosso se rappresenta un individuo suscettibile alla malattia, di verde se è infetto e blu se è già stato contagiato. La griglia si aggiorna ogni 30ms che rappresenta un giorno, le persone infette rimarranno tali per un numero di giorni distribuito uniformemente tra 14 e 20. Contestualmente, nell'altra finestra [Figura 2 (a)] vengono graficati i valori di S(t) I(t) e R(t) conteggiando i valori reali dell'attuale simulazione.

\begin{figure}
\centering
\subfloat[][\emph{griglia 256x256 rappresentante la situazione di ogni individuo}]
{\includegraphics[width=.45\textwidth]{Figura_3.png}} \quad \subfloat[][\emph{grafico della situazione di contagio secondo il modello attuale}]
{\includegraphics[width=.45\textwidth]{Figura_4.png}} \\
\caption{}
\label{fig:subfig}
\end{figure}

\section{Test e condizioni per la corretta esecuzione}
....
\ \\
....
\ \\
...includi in questa sezione gli assert e try 
\ \\
.....
\ \\
...
\ \\
....
\end{document}